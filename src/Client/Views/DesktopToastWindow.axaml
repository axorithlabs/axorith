<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:Axorith.Client.ViewModels"
        xmlns:converters="using:Axorith.Client.Converters"
        mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="140"
        x:Class="Axorith.Client.Views.DesktopToastWindow"
        x:DataType="vm:ToastViewModel"
        
        SystemDecorations="None"
        ShowInTaskbar="False"
        Topmost="True"
        CanResize="False"
        SizeToContent="Height"
        Width="400"
        Background="{x:Null}"
        TransparencyLevelHint="Transparent"
        WindowStartupLocation="Manual"
        Title="Axorith Notification">

    <Window.Styles>
        <Style Selector="Window">
            <Setter Property="Opacity" Value="0"/>
            <Style.Animations>
                <Animation Duration="0:0:0.25" FillMode="Forward" Easing="CubicEaseOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="0"/>
                        <Setter Property="TranslateTransform.Y" Value="20"/>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1"/>
                        <Setter Property="TranslateTransform.Y" Value="0"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="Button.close">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Foreground" Value="#666"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="Template">
                <ControlTemplate>
                    <Border Background="{TemplateBinding Background}" CornerRadius="4">
                        <PathIcon Data="M19,6.41 L17.59,5 L12,10.59 L6.41,5 L5,6.41 L10.59,12 L5,17.59 L6.41,19 L12,13.41 L17.59,19 L19,17.59 L13.41,12 Z" 
                                  Width="10" Height="10" 
                                  Foreground="{TemplateBinding Foreground}"/>
                    </Border>
                </ControlTemplate>
            </Setter>
        </Style>
        <Style Selector="Button.close:pointerover">
            <Setter Property="Background" Value="#222"/>
            <Setter Property="Foreground" Value="#FFF"/>
        </Style>
    </Window.Styles>

    <Border Background="#111111"
            BorderBrush="#333"
            BorderThickness="1"
            CornerRadius="8"
            Padding="0"
            BoxShadow="0 10 30 0 #80000000"
            Margin="10">
        
        <Grid ColumnDefinitions="4, *">
            <Border Grid.Column="0" 
                    Background="{Binding Type, Converter={StaticResource NotificationTypeToBrushConverter}}" 
                    CornerRadius="8,0,0,8" 
                    VerticalAlignment="Stretch"/>
            
            <Grid Grid.Column="1" RowDefinitions="Auto, *">
                <Grid Grid.Row="0" ColumnDefinitions="*, Auto" Margin="20,16,12,0">
                    <TextBlock Text="AXORITH" 
                               FontSize="10" 
                               FontWeight="Bold" 
                               Foreground="#666" 
                               LetterSpacing="1.5"
                               VerticalAlignment="Center"/>
                    
                    <Button Grid.Column="1" Classes="close" Click="OnCloseClicked"/>
                </Grid>

                <StackPanel Grid.Row="1" Margin="20,8,20,24" Spacing="4">
                    <TextBlock Text="{Binding DesktopTitle}"
                               Foreground="{Binding Type, Converter={StaticResource NotificationTypeToBrushConverter}}"
                               FontSize="16"
                               FontWeight="Bold"
                               LetterSpacing="0.5"
                               TextWrapping="Wrap"/>

                    <TextBlock Text="{Binding Body}"
                               Foreground="#E0E0E0"
                               FontSize="14"
                               LineHeight="20"
                               TextWrapping="Wrap"
                               Opacity="0.9"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>